# MakeFshared

MakeFshared is a package that introduce how to build self-make Fortran shared library and package.

## Development Environment

* Julia 0.7.0 on Fedora 28 (4.18.12-200 on x86_64)
* Julia 1.0.1 on Fedora 28 (4.18.12-200 on x86_64)

The reason is that `BinaryBuilder.jl` and `BinaryProvider.jl` could not install on Julia 1.1-DEV on F28. On Julia 0.7.0 and 1.0.1, `BinaryProvidir.jl` is installed. (`BinaryBuiler.jl` could not installed.)  

## About Fortran Expansion Code
Refer to [here](https://github.com/mkatase/JuliaPractice) for more information about build and check.

```bash
$ mkdir work
$ cd work
$ curl -O https://mkatase.github.io/github-hosted/data/libmakef.tar.gz
$ tar xvfz libmakef.tar.gz 
$ cd libmakef
$ mkdir build
$ cd build/
$ cmake ..
$ cmake --build .
...
$ ./a.out
 === by subroutine
 Hello Subroutine World !!
 === by eins module
           3           4
          12
 === by zwei module
 --- foo
           7
           8
           7          15
 --- moo
           2           4
           2           5
           4           9
```

VERSION 3.11 is cmake_minimum_required in original code, but this tarball is VERSION 3.7.2.

## Hash code
Hash code outputs using `sha256sum` command.

```bash
$ sha256sum libmakef.tar.gz
d33fef76bf8026112b7d441a4038225d679f305eb23fe2dfb5b249ce270eafbe libmakef.tar.gz
```

## Description about deps directory
`deps directory` supports pacakge build command.

* build.jl
    - To describe download path and hash code
* compile.jl
    - main build script for this package
    - call from build.jl
    - this script is the same as the above fortran expansion procedure
* deps.jl
    - auto generated by build.jl if script is passed
    - call from __init__ function in MakeFshared.jl
    - global variable `libextraf` is very important

## How to install

```julia
(v0.7) pkg> add https://github.com/mkatase/MakeFshared.jl.git
...
(v0.7) pkg> build MakeFshared
  Building CMake ──────→ `~/.julia/packages/CMake/yag1A/deps/build.log`
  Building MakeFshared → `~/.julia/packages/MakeCshared/KA7V1/deps/build.log`

(v0.7) pkg> test MakeFshared
   Testing MakeFshared
...
# printout function check
Hello C World !!
# calc function check
# hello function check
Test Summary: | Pass  Total
MakeCshared   |    6      6
   Testing MakeCshared tests passed 
```

## Usage

```julia

```

## Thanks
Refer to the following. Thanks.

* [NLopt.jl](https://github.com/JuliaOpt/NLopt.jl)
